# 坐姿检测系统 - 快速启动指南

## 🚀 一键启动

### Windows 用户（推荐）⭐
双击运行项目根目录下的批处理文件：
```
start_gui.bat
```

---

## 📋 前提条件

### 1. 安装 Python 3.11
确保已安装 Python 3.11，路径为：
```
C:\Program Files\Python311\python.exe
```

### 2. 安装依赖包
**首次使用前必须安装依赖！**

在项目根目录打开命令行，运行：
```bash
cd GUI
"C:\Program Files\Python311\python.exe" -m pip install -r ../requirements.txt
```

或者使用 pip：
```bash
cd GUI
pip install -r ../requirements.txt
```

**主要依赖包：**
- PySide6 (Qt界面)
- torch (深度学习)
- opencv-python (图像处理)
- mediapipe (骨骼检测)
- ultralytics (YOLO模型)

---

## 🎯 启动方式
### 方式1：命令行启动

#### PowerShell（推荐）
在项目根目录打开 PowerShell：
```powershell
cd GUI
& "C:\Program Files\Python311\python.exe" gui.py
```

或者使用相对路径：
```powershell
& "C:\Program Files\Python311\python.exe" GUI/gui.py
```

#### CMD（命令提示符）
在项目根目录打开 CMD：
```cmd
cd GUI
"C:\Program Files\Python311\python.exe" gui.py
```

或者使用相对路径：
```cmd
"C:\Program Files\Python311\python.exe" GUI/gui.py
```

#### 使用 python 命令（如果已添加到 PATH）
```bash
cd GUI
python gui.py
```

### ⚠️ 常见错误

**错误1：找不到 gui.py**
```
can't open file 'gui.py': [Errno 2] No such file or directory
```
**原因**：在错误的目录运行命令  
**解决**：必须先 `cd GUI` 进入 GUI 目录，或使用 `python GUI/gui.py`

**错误2：找不到 PySide6**
```
ModuleNotFoundError: No module named 'PySide6'
```
**原因**：未安装依赖包  
**解决**：运行 `pip install -r requirements.txt`

**错误3：PowerShell 语法错误**
```
表达式或语句中包含意外的标记"gui.py"
```
**原因**：在 PowerShell 中使用了 CMD 语法  
**解决**：在 PowerShell 中必须使用 `&` 运算符：
```powershell
& "C:\Program Files\Python311\python.exe" gui.py
```

---

## ⭐ 新功能：详细的中文参数说明

现在所有参数都有详细的中文工具提示！

### 如何查看？
1. 将鼠标移到任何参数上
2. 等待约1秒
3. 自动显示详细说明

### 包含什么内容？
- 📝 参数的作用和原理
- 🔢 数值范围和推荐值
- ⚙️ 调整效果说明
- 💡 实用的调整建议
- 🔧 常见问题解决方案

---

## 🎯 3步快速开始

### 第1步：安装依赖（首次使用）
```bash
cd GUI
pip install -r ../requirements.txt
```

### 第2步：启动程序
双击 `start_gui.bat` 或运行：

**PowerShell：**
```powershell
cd GUI
& "C:\Program Files\Python311\python.exe" gui.py
```

**CMD：**
```cmd
cd GUI
"C:\Program Files\Python311\python.exe" gui.py
```

### 第3步：设置参数（根据工具提示）
鼠标悬停在每个参数上查看详细说明，推荐设置：

```
Model: yolov11-eq.pt          ← 坐姿检测专用模型
Mediapipe: ✅ 开启             ← 提高检测精度
IOU: 0.45                     ← 保持默认
Confidence: 0.28              ← 检测灵敏度
Delay: 8ms                    ← 帧间延迟
Line Width: 3                 ← 边框粗细
```

### 第4步：开始检测
1. 点击左侧"Webcam 摄像头"
2. 开始实时坐姿检测
3. 检测结果显示中文标签

---

## 💡 工具提示示例

### Confidence 置信度
鼠标悬停时显示：
```
【Confidence 置信度阈值】
作用：控制检测的灵敏度，过滤低置信度的检测结果
• 数值范围：0.01 - 1.00
• 默认值：0.25（推荐 0.25-0.35）

调整效果：
• 调高(0.35-0.50)：只显示高置信度结果，减少误检但可能漏检
  适用场景：误检太多、需要更准确的结果
• 调低(0.15-0.25)：显示更多检测结果，提高检出率但可能误检
  适用场景：检测不到目标、需要更灵敏的检测

💡 建议：
  - 检测不到 → 降低到 0.20-0.25
  - 误检太多 → 提高到 0.35-0.40
  - 正常使用 → 保持 0.25-0.30
```

---

## � 常PowerShell vs CMD 说明

### 如何识别您使用的是哪个？

**PowerShell 特征：**
- 提示符显示：`PS D:\path\to\directory>`
- 窗口标题：Windows PowerShell
- 支持更多高级命令

**CMD 特征：**
- 提示符显示：`D:\path\to\directory>`
- 窗口标题：命令提示符 或 Command Prompt
- 传统的 Windows 命令行

### 命令语法区别

| 操作 | PowerShell | CMD |
|------|-----------|-----|
| 运行带空格路径的程序 | `& "C:\Program Files\Python311\python.exe" gui.py` | `"C:\Program Files\Python311\python.exe" gui.py` |
| 切换目录 | `cd GUI` | `cd GUI` |
| 安装依赖 | `pip install -r requirements.txt` | `pip install -r requirements.txt` |

### 推荐使用方式

1. **最简单**：双击 `start_gui.bat`（自动使用 CMD）
2. **PowerShell**：使用 `&` 运算符
3. **CMD**：直接使用引号

---

## 🔧 常见问题快速解决

### 问题1：找不到 gui.py
**错误信息**：
```
can't open file 'gui.py': [Errno 2] No such file or directory
```

**解决方案**：
```bash
# 方法1：进入 GUI 目录
cd GUI
"C:\Program Files\Python311\python.exe" gui.py

# 方法2：使用相对路径
"C:\Program Files\Python311\python.exe" GUI/gui.py

# 方法3：使用批处理文件（推荐）
双击 start_gui.bat
```

### 问题2：找不到 PySide6
**错误信息**：
```
ModuleNotFoundError: No module named 'PySide6'
```

**解决方案**：
```bash
# 安装所有依赖
cd GUI
pip install -r ../requirements.txt

# 或单独安装 PySide6
pip install PySide6
```

### 问题3：PowerShell 语法错误
**错误信息**：
```
表达式或语句中包含意外的标记"gui.py"
ParserError: UnexpectedToken
```

**原因**：在 PowerShell 中使用了 CMD 的语法

**解决方案**：

**错误的写法（CMD 语法）：**
```powershell
"C:\Program Files\Python311\python.exe" gui.py  # ❌ 在 PowerShell 中会报错
```

**正确的写法（PowerShell 语法）：**
```powershell
& "C:\Program Files\Python311\python.exe" gui.py  # ✅ 正确
```

**或者使用批处理文件：**
```bash
# 双击 start_gui.bat（推荐，自动使用正确语法）
```

### 问题4：检测不到人
**解决方案**：
1. 鼠标悬停在"Confidence 置信度"上
2. 查看工具提示的建议
3. 降低置信度到 0.20-0.25

### 问题5：电脑卡顿
**解决方案**：
1. 鼠标悬停在"Delay(ms) 延迟"上
2. 查看工具提示的建议
3. 增加延迟到 15-20ms

### 问题6：误检太多
**解决方案**：
1. 鼠标悬停在"Confidence 置信度"上
2. 查看工具提示的建议
3. 提高置信度到 0.35-0.40

---

## 📚 配套文档

### 快速查阅
- **界面工具提示** - 鼠标悬停查看（最快）⭐
- **GUI/快速参考.txt** - 一页纸参考卡片

### 深入学习
- **GUI/参数调整详细指南.md** - 完整的参数说明
  - 每个参数的详细讲解
  - 工作原理和调整效果对比表
  - 常见问题与解决方案
  - 5种推荐配置方案
  - 参数调整技巧

### 使用指南
- **如何使用新的参数说明功能.md** - 详细使用教程
- **工具提示测试指南.md** - 测试工具提示功能
- **GUI/更新前后对比.txt** - 更新前后对比

### 其他文档
- **坐姿类别说明.md** - 6种坐姿类别详细说明
- **GUI/config/中文标签说明.md** - 中文标签配置说明

---

## 🎓 推荐学习路径

### 新手用户（5分钟上手）
1. ✅ 安装依赖包（首次使用）
2. ✅ 启动GUI程序
3. ✅ 鼠标悬停查看各参数的工具提示
4. ✅ 使用推荐配置开始检测
5. ✅ 遇到问题时查看工具提示的建议

### 进阶用户（30分钟精通）
1. ✅ 阅读 `GUI/参数调整详细指南.md`
2. ✅ 理解各参数的工作原理
3. ✅ 尝试不同的配置方案
4. ✅ 根据实际需求优化参数

---

## 📊 推荐配置方案

### 方案1：日常办公监测（推荐）⭐
```
Model: yolov11-eq.pt
Mediapipe: ✅ 开启
IOU: 0.45
Confidence: 0.28
Delay: 8ms
Line Width: 3
```
**适用**：日常坐姿监测，平衡精度和性能

### 方案2：高精度检测
```
Model: yolov11-eq.pt
Mediapipe: ✅ 开启
IOU: 0.48
Confidence: 0.32
Delay: 10ms
Line Width: 3
```
**适用**：需要高准确率，可接受略低帧率

### 方案3：低性能设备
```
Model: yolov11-eq.pt
Mediapipe: ❌ 关闭
IOU: 0.45
Confidence: 0.30
Delay: 20ms
Line Width: 3
```
**适用**：老旧设备，降低性能要求

---

## ⚠️ 重要提示

### 首次使用
- **必须先安装依赖包**：`pip install -r requirements.txt`
- 首次启动需要下载 Mediapipe 模型（约10分钟）
- 下载完成后，以后启动都会很快
- 请耐心等待下载完成

### Python 版本
- 必须使用 Python 3.11
- 确认安装路径：`C:\Program Files\Python311\python.exe`

### 启动目录
- **方法1**：在项目根目录双击 `start_gui.bat`
- **方法2**：在 GUI 目录运行 `python gui.py`
- **不要**在项目根目录直接运行 `python gui.py`（会找不到文件）

### 模型选择
- 坐姿检测必须使用 `yolov11-eq.pt` 模型
- 其他模型用于不同的检测任务

### 检测类别
系统可以检测6种坐姿：
- ✅ 正确坐姿 (normal)
- ⚠️ 身体左倾 (body_left)
- ⚠️ 身体右倾 (body_right)
- ⚠️ 左手托腮 (left_support_head)
- ⚠️ 右手托腮 (right_support_head)
- ⚠️ 趴桌 (lying_down)

---

## 🎉 开始使用

现在您已经了解了基本使用方法，赶快启动程序试试吧！

### 完整启动流程

#### 首次使用：
**PowerShell：**
```powershell
# 1. 安装依赖
cd GUI
pip install -r ../requirements.txt

# 2. 返回项目根目录
cd ..

# 3. 启动程序
cd GUI
& "C:\Program Files\Python311\python.exe" gui.py
```

**CMD：**
```cmd
# 1. 安装依赖
cd GUI
pip install -r ../requirements.txt

# 2. 返回项目根目录
cd ..

# 3. 启动程序
cd GUI
"C:\Program Files\Python311\python.exe" gui.py
```

**或者直接双击：**
```
start_gui.bat
```

#### 后续使用：
```bash
# 直接双击 start_gui.bat（最简单）
```

或使用命令行：

**PowerShell：**
```powershell
cd GUI
& "C:\Program Files\Python311\python.exe" gui.py
```

**CMD：**
```cmd
cd GUI
"C:\Program Files\Python311\python.exe" gui.py
```

### 记住
- 🖱️ 鼠标悬停查看工具提示
- 📚 遇到问题查阅文档
- 💡 使用推荐配置
- 🎯 根据需求调整

---

## 📞 获取帮助

### 查找顺序
1. ✅ 查看本文档的"常见问题快速解决"部分
2. ✅ 查看界面工具提示（鼠标悬停）
3. ✅ 查阅 `GUI/快速参考.txt`
4. ✅ 查看 `GUI/参数调整详细指南.md` 的常见问题部分
5. ✅ 尝试推荐配置方案
6. ✅ 查看 `坐姿类别说明.md`

### 文档位置
```
项目根目录/
├── start_gui.bat                      ← 一键启动 ⭐
├── 快速启动指南.md                    ← 本文档
├── requirements.txt                   ← 依赖列表
├── 如何使用新的参数说明功能.md        ← 详细使用教程
├── GUI/
│   ├── gui.py                         ← 主程序
│   ├── 快速参考.txt                   ← 快速参考卡片
│   ├── 参数调整详细指南.md            ← 详细参数说明
│   └── 更新前后对比.txt               ← 更新对比
└── 坐姿类别说明.md                    ← 坐姿类别说明
```

---

**祝您使用愉快！** 😊

**更新日期**：2024年12月16日  
**版本**：v1.2  
**更新内容**：
- 添加依赖安装说明和常见错误解决方案
- 添加 PowerShell 和 CMD 的区别说明
- 添加 PowerShell 语法错误的解决方案
